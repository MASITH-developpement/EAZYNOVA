<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    
    <t t-name="eazynova.FacialRecognitionCapture" owl="1">
        <div class="o_facial_recognition_capture">
            
            <!-- En-tête -->
            <div class="o_facial_header text-center mb-3">
                <h2>
                    <i class="fa fa-camera"/> Reconnaissance Faciale
                </h2>
                <p class="text-muted">
                    Positionnez votre visage face à la caméra
                </p>
            </div>
            
            <!-- Zone de capture -->
            <div class="o_facial_capture_area">
                
                <!-- Vidéo en direct -->
                <div class="o_video_container" t-if="!state.captured">
                    <video t-ref="video" autoplay="autoplay" playsinline="playsinline"/>
                    <div class="o_face_guide">
                        <div class="o_face_oval"/>
                    </div>
                </div>
                
                <!-- Image capturée -->
                <div class="o_captured_image" t-if="state.captured">
                    <img t-att-src="state.imageData" alt="Photo capturée"/>
                </div>
                
                <!-- Canvas caché pour la capture -->
                <canvas t-ref="canvas" style="display: none;"/>
                
            </div>
            
            <!-- Boutons d'action -->
            <div class="o_facial_actions text-center mt-3">
                
                <!-- Bouton capture -->
                <button class="btn btn-lg btn-primary" 
                        t-if="state.streaming and !state.captured"
                        t-on-click="captureImage">
                    <i class="fa fa-camera"/> Capturer
                </button>
                
                <!-- Boutons après capture -->
                <t t-if="state.captured">
                    <button class="btn btn-lg btn-success me-2" 
                            t-on-click="authenticate"
                            t-att-disabled="state.processing">
                        <i class="fa fa-check"/> 
                        <t t-if="state.processing">Authentification...</t>
                        <t t-else="">Se connecter</t>
                    </button>
                    <button class="btn btn-lg btn-secondary" 
                            t-on-click="retake"
                            t-att-disabled="state.processing">
                        <i class="fa fa-refresh"/> Recommencer
                    </button>
                </t>
                
            </div>
            
            <!-- Instructions -->
            <div class="o_facial_instructions mt-4">
                <div class="alert alert-info">
                    <h5><i class="fa fa-info-circle"/> Conseils</h5>
                    <ul class="mb-0">
                        <li>Assurez-vous d'être dans un endroit bien éclairé</li>
                        <li>Regardez directement la caméra</li>
                        <li>Retirez lunettes de soleil et masque</li>
                        <li>Positionnez votre visage dans l'ovale</li>
                    </ul>
                </div>
            </div>
            
        </div>
    </t>
    
</templates>