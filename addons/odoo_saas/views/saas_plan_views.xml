<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Vue Liste des Plans -->
  <record id="view_saas_plan_tree" model="ir.ui.view">
    <field name="name">saas.plan.tree</field>
    <field name="model">saas.plan</field>
    <field name="arch" type="xml">
      <tree string="Plans d'Abonnement">
        <field name="sequence" widget="handle" />
        <field name="name" />
        <field name="code" />
        <field name="price_monthly" widget="monetary" />
        <field name="price_yearly" widget="monetary" />
        <field name="discount_yearly" widget="percentage" />
        <field name="max_users" />
        <field name="max_storage_gb" />
        <field name="client_count" />
        <field name="active" widget="boolean_toggle" />
      </tree>
    </field>
  </record>
  <!-- Vue Formulaire des Plans -->
  <record id="view_saas_plan_form" model="ir.ui.view">
    <field name="name">saas.plan.form</field>
    <field name="model">saas.plan</field>
    <field name="arch" type="xml">
      <form string="Plan d'Abonnement">
        <sheet>
          <div class="oe_button_box" name="button_box">
            <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
              <field name="active" widget="boolean_button" options='{"terminology": "archive"}' />
            </button>
            <button name="action_view_clients" type="object" class="oe_stat_button" icon="fa-users">
              <field name="client_count" widget="statinfo" string="Clients" />
            </button>
          </div>
          <div class="oe_title">
            <h1>
              <field name="name" placeholder="Nom du plan (ex: Basic, Pro, Enterprise)" />
            </h1>
            <h2>
              <field name="code" placeholder="CODE" />
            </h2>
          </div>
          <group>
            <group string="Tarification">
              <field name="price_monthly" widget="monetary" />
              <field name="price_yearly" widget="monetary" />
              <field name="discount_yearly" widget="percentage" readonly="1" />
            </group>
            <group string="Configuration">
              <field name="sequence" />
              <field name="active" invisible="1" />
            </group>
          </group>
          <group>
            <group string="Limites">
              <field name="max_users" />
              <field name="max_storage_gb" widget="float" />
            </group>
            <group string="Description">
              <field name="description" nolabel="1" placeholder="Description du plan..." />
            </group>
          </group>
          <notebook>
            <page string="FonctionnalitÃ©s" name="features">
              <field name="features"
                placeholder="Liste des fonctionnalitÃ©s (une par ligne)&#10;&#10;Exemples:&#10;- Nombre d'utilisateurs illimitÃ©&#10;- Support prioritaire 24/7&#10;- Espace de stockage 100 GB&#10;- API complÃ¨te&#10;- White-label" />
            </page>
          </notebook>
        </sheet>
        <div class="oe_chatter">
          <field name="message_follower_ids" />
          <field name="activity_ids" />
          <field name="message_ids" />
        </div>
      </form>
    </field>
  </record>
  <!-- Vue Kanban des Plans -->
  <record id="view_saas_plan_kanban" model="ir.ui.view">
    <field name="name">saas.plan.kanban</field>
    <field name="model">saas.plan</field>
    <field name="arch" type="xml">
      <kanban class="o_kanban_mobile" default_group_by="sequence">
        <field name="id" />
        <field name="name" />
        <field name="code" />
        <field name="price_monthly" />
        <field name="price_yearly" />
        <field name="max_users" />
        <field name="max_storage_gb" />
        <field name="client_count" />
        <templates>
          <t t-name="kanban-box">
            <div class="oe_kanban_global_click">
              <div class="oe_kanban_card oe_kanban_global_click o_kanban_record_has_image_fill">
                <div class="o_kanban_card_header">
                  <div class="o_kanban_card_header_title">
                    <div class="o_primary">
                      <strong>
                        <field name="name" />
                      </strong>
                    </div>
                    <div class="o_secondary">
                      <field name="code" />
                    </div>
                  </div>
                </div>
                <div class="o_kanban_card_content">
                  <div class="row">
                    <div class="col-6">
                      <div><strong>Mensuel:</strong> <field name="price_monthly" /> â‚¬</div>
                      <div><strong>Annuel:</strong> <field name="price_yearly" /> â‚¬</div>
                    </div>
                    <div class="col-6">
                      <div>ðŸ‘¥ <field name="max_users" /> users</div>
                      <div>ðŸ’¾ <field name="max_storage_gb" /> GB</div>
                    </div>
                  </div>
                </div>
                <div class="o_kanban_card_footer">
                  <div class="o_kanban_footer_left">
                    <span class="badge badge-pill badge-info">
                      <field name="client_count" /> clients </span>
                  </div>
                </div>
              </div>
            </div>
          </t>
        </templates>
      </kanban>
    </field>
  </record>
  <!-- Vue Recherche des Plans -->
  <record id="view_saas_plan_search" model="ir.ui.view">
    <field name="name">saas.plan.search</field>
    <field name="model">saas.plan</field>
    <field name="arch" type="xml">
      <search string="Rechercher Plans">
        <field name="name" />
        <field name="code" />
        <separator />
        <filter string="Actifs" name="active" domain="[('active', '=', True)]" />
        <filter string="ArchivÃ©s" name="inactive" domain="[('active', '=', False)]" />
        <group expand="0" string="Grouper Par">
          <filter string="SÃ©quence" name="group_sequence" context="{'group_by': 'sequence'}" />
        </group>
      </search>
    </field>
  </record>
  <!-- Action pour ouvrir les plans -->
  <record id="action_saas_plan" model="ir.actions.act_window">
    <field name="name">Plans d'Abonnement</field>
    <field name="res_model">saas.plan</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="context">{'search_default_active': 1}</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        CrÃ©er votre premier plan d'abonnement
      </p>
      <p>
        DÃ©finissez vos offres SaaS avec diffÃ©rents niveaux de service et tarifs.
      </p>
    </field>
  </record>
</odoo>
